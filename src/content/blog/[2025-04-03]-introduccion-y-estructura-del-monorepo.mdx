---
title: "Cap√≠tulo 1: Introducci√≥n y estructura del monorepo"
slug: "libreria-de-componentes-en-monorepo/introduccion-y-estructura-del-monorepo"
description: "Crear una librer√≠a de componentes UI no deber√≠a ser sin√≥nimo de caos en m√∫ltiples repos, builds duplicadas o versiones desincronizadas. En este primer cap√≠tulo te mostrar√© c√≥mo estructurar un monorepo robusto y escalable para construir, documentar, testear y publicar tus componentes con tecnolog√≠as como React, TypeScript, pnpm, SWC y Turborepo."
categories: ["Desarrollo"]
tags: "react,components,monorepo,storybook,ui"
pubDate: "2025-04-03"
---

import ExternalLink from "@/components/ExternalLink.astro";
import InternalLink from "@/components/InternalLink.astro";

<ExternalLink href="https://github.com/italodr/demo-component-library/commit/005329b777408467675ce3a936fc9c08318a5958">Enlace al commit en Github de este cap√≠tulo</ExternalLink>

## ¬øPor qu√© un monorepo?

Al usar un monorepo:

- Centralizas la configuraci√≥n y mantenimiento.
- Compartes c√≥digo entre paquetes f√°cilmente.
- Puedes crear documentaci√≥n y tests comunes.
- Tienes un √∫nico punto de entrada para build y CI/CD.

En este caso, construiremos una librer√≠a que podr√°:

- Usarse por paquetes independientes.
- Mantener documentaci√≥n viva con Storybook.
- Publicarse autom√°ticamente en npm mediante GitHub Actions y Changesets.

## Estructura base del proyecto

Creamos una estructura clara con dos workspaces: `packages/` para los componentes y `docs/` para la documentaci√≥n:

```text
üìÅ myui/                  # Nombre del proyecto
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îî‚îÄ‚îÄ button/           # Primer componente
‚îÇ   ‚îî‚îÄ‚îÄ input/            # Otro componente
‚îú‚îÄ‚îÄ docs/                 # Documentaci√≥n o Storybook
‚îú‚îÄ‚îÄ .github/              # Workflows de GitHub Actions
‚îú‚îÄ‚îÄ node_modules/         # Administrado por pnpm
‚îú‚îÄ‚îÄ package.json          # Scripts y dependencias globales
‚îú‚îÄ‚îÄ pnpm-workspace.yaml   # Workspaces declarados
‚îú‚îÄ‚îÄ turbo.json            # Configuraci√≥n de Turborepo
‚îî‚îÄ‚îÄ tsconfig.base.json    # Configuraci√≥n base de TypeScript
```

## Tecnolog√≠as que usaremos

| Herramienta | Prop√≥sito |
| :----------- | :--------- |
| pnpm | Gestor de paquetes y workspaces |
| Turborepo | Ejecuci√≥n de scripts y caching inteligente de monorepo |
| React | Base para los componentes |
| TypeScript | Tipado y DX mejorado |
| SWC | Compilador moderno para builds r√°pidas |
| Jest / Vitest | Testing accesible, r√°pido y confiable |
| Testing Library | Testing orientado al usuario final |
| Storybook | Documentaci√≥n y desarrollo aislado de componentes |
| Changesets | Versionado sem√°ntico multi-paquete |
| Syncpack | Sincronizaci√≥n de dependencias en todo el monorepo |
| GitHub Actions | Automatizaci√≥n de testing y despliegues |

## Inicializaci√≥n r√°pida del proyecto

Para empezar, creamos el repositorio y lo inicializamos con `pnpm`, `turborepo` y `git`.

```bash
mkdir myui && cd myui
pnpm init
pnpm add -D turbo
git init
```

Creamos el archivo `pnpm-workspace.yaml` para declarar nuestros workspaces:

```yaml
packages:
  - "packages/*"
  - "docs"
```

Creamos la configuraci√≥n de Turborepo en `turbo.json`:

```json
{
  "$schema": "https://turborepo.org/schema.json",
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**"]
    },
    "dev": {
      "cache": false
    },
    "lint": {},
    "test": {}
  }
}
```

Creamos nuestro archivo `.gitignore` para ignorar `node_modules`:

```text
node_modules
```

## Scripts √∫tiles y organizaci√≥n

Modificamos nuestro `package.json` para a√±adir scripts √∫tiles y organizaci√≥n.

```json
{
  "name": "myui",
  "version": "1.0.0",
  "description": "",
  "scripts": {
    "dev": "turbo run dev",
    "build": "turbo run build",
    "lint": "turbo run lint",
    "test": "turbo run test"
  },
  "keywords": [],
  "author": "",
  "license": "MIT",
  "packageManager": "pnpm@10.4.1",
  "devDependencies": {
    "@swc/cli": "0.7.8",
    "@swc/core": "1.12.14",
    "turbo": "^2.5.5"
  }
}
```

## Pr√≥ximo cap√≠tulo

En el Cap√≠tulo 2 veremos c√≥mo:

- Configurar correctamente `tsconfig` y `swcrc`.
- Crear tu primer paquete de componentes.
- Usar SWC para transpilar c√≥digo de forma eficiente.
- Preparar la salida para distribuci√≥n.

<InternalLink href="/libreria-de-componentes-en-monorepo/configuracion-base-del-proyecto">Ir al siguiente cap√≠tulo</InternalLink><br /><br />
<InternalLink href="/libreria-de-componentes-en-monorepo">Volver a la lista de cap√≠tulos</InternalLink>
